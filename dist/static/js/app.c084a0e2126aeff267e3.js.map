{"version":3,"sources":["webpack:///./src/App.vue?3c18","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///src/components/Camera.vue","webpack:///./src/components/Camera.vue?b6a8","webpack:///./src/components/Camera.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","Camera","isCapturing","msGetUserMedia","stream","errorCallback","stop","stopTracks","image","toggleCamera","body","then","response","itemObj","textAnnotations","shift","y","x","description","checkNewRow","elem","components_Camera","_vm","staticClass","_m","_v","src","staticStyle","display","height","width","on","click","snapshot","vision","type","accept","capture","autoplay","src_components_Camera","Camera_normalizeComponent","vue_esm","use","vue_router_esm","router","routes","path","name","component","config","productionTip","vue_resource_es2015","el","template","components","App"],"mappings":"0KAGAA,GADiBC,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,oBAE5GI,oBCuBjBC,EAtBAC,EAAA,OAaAC,OCPA,ODSAZ,GATA,EATA,SAAAa,GACAF,EAAA,SAYA,KAEA,MAUA,oBELAG,QAEA,uCAGA,kBACA,QAEA,qEAKA,mCAEA,WACAX,+BACA,4BAEA,+BACAY,8HAEAC,uIAGAC,YACAA,oCACA,IACAC,OACA,4BACAC,qCACAC,SACA,qBACA,0DAKA,yBACA,+BAEA,SAJAjB,oCAMA,KANAA,uBAOA,gDAPAA,KAQAkB,YAGAC,sCAMAC,0EADA,qBAMA,yDAIA,yHACAA,GAAAC,KAAA,SAAAC,uHAIA,uBACA,YACAC,eAEA,OACA,SAEA,kEAIA,0BACAC,mBACAC,2FAEAC,wEACAC,wBAIA,OACA,SAGA,gCAGA,YAEAC,qBAGAC,4DACAD,eACA,gCAMA,KAHAC,yCACAC,KAKAD,sCAMAP,QCtIAS,GADiBjC,OAFjB,WAA0B,IAAAkC,EAAAhC,KAAaD,EAAAiC,EAAA/B,eAA0BC,EAAA8B,EAAA7B,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiB+B,YAAA,WAAqBD,EAAAE,GAAA,SAAAF,EAAAG,GAAA,KAAAjC,EAAA,OAA8CE,OAAOC,GAAA,aAAgB2B,EAAAE,GAAA,SAAAF,EAAAG,GAAA,KAAAjC,EAAA,OAA8CE,OAAOgC,IAAA,MAAUJ,EAAAG,GAAA,KAAAjC,EAAA,UAA2BmC,aAAaC,QAAA,QAAiBlC,OAAQmC,OAAA,MAAAC,MAAA,SAA8BR,EAAAG,GAAA,KAAAH,EAAA,YAAA9B,EAAA,UAA6CuC,IAAIC,MAAAV,EAAAW,YAAsBX,EAAAG,GAAA,mBAAAjC,EAAA,UAAyCuC,IAAIC,MAAAV,EAAAb,gBAA0Ba,EAAAG,GAAA,mBAAAH,EAAAG,GAAA,KAAAjC,EAAA,UAAqDuC,IAAIC,MAAAV,EAAAY,UAAoBZ,EAAAG,GAAA,iBAE5iB7B,iBADjB,WAAoC,IAAaP,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,OAAOC,GAAA,YAAeH,EAAA,KAAtGF,KAAsGmC,GAAA,mBAAAjC,EAAA,SAAgDE,OAAOyC,KAAA,OAAAC,OAAA,UAAAzC,GAAA,UAAA0C,QAAA,iBAA0E,WAAc,IAAahD,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,OAAOC,GAAA,WAAcH,EAAA,SAAcE,OAAO4C,SAAA,WCwBnZC,EAtBAzC,EAAA,OAaA0C,CACAvC,EACAoB,GATA,EATA,SAAArB,GACAF,EAAA,SAYA,kBAEA,MAUA,QCpBA2C,EAAA,EAAIC,IAAIC,EAAA,GAER,IAAAC,EAAA,IAAmBD,EAAA,GACjBE,SAEIC,KAAM,IACNC,KAAM,SACNC,UAAWT,MCLjBE,EAAA,EAAIQ,OAAOC,eAAgB,EAE3BT,EAAA,EAAIC,IAAIS,EAAA,GAGR,IAAIV,EAAA,GACFW,GAAI,OACJR,SACAS,SAAU,SACVC,YAAcC,IAAA1D","file":"static/js/app.c084a0e2126aeff267e3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-09928f92\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-09928f92\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09928f92\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template>\n  <div class=\"camera\">\n    <div id=\"mobile\">\n      <p>Capture Image: <input type=\"file\" accept=\"image/*\" id=\"capture\" capture=\"camera\"></p>\n    </div>\n\n    <div id=\"desktop\">\n      <div id=\"video\">\n        <video autoplay></video>\n      </div>\n      <img src=\"\">\n      <canvas style=\"display:none;\" height=\"480\" width=\"640\"></canvas>\n      <button v-if=\"isCapturing\" v-on:click=\"snapshot\">Take Snapshot</button>\n      <button v-else v-on:click=\"toggleCamera\">Toggle Camera</button>\n      <button v-on:click=\"vision\">Vision</button>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'camera',\n    data() {\n      return {\n        stream: null,\n        isCapturing: false,\n        image: null\n      }\n    },\n    methods: {\n      toggleCamera: function () {\n        const errorCallback = function() {\n          console.log('Error')\n        }\n        const video = document.querySelector('video')\n        const that = this\n        const videoDiv = document.getElementById('video')\n        videoDiv.style.display=\"block\"\n\n        this.isCapturing = !this.isCapturing\n        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia\n\n        if (navigator.getUserMedia && this.isCapturing) {\n          navigator.getUserMedia({video: true}, function(stream) {\n            video.src = window.URL.createObjectURL(stream)\n            that.stream = stream\n            document.querySelector('img').src=\"\"\n          }, errorCallback)\n        } else {\n          const stopTracks = track => track.stop()\n          that.stream.getTracks().forEach(stopTracks)\n          video.src = null\n          videoDiv.style.display=\"none\"\n        }\n      },\n      snapshot: function () {\n        const that = this\n        const canvas = document.querySelector('canvas')\n        const ctx = canvas.getContext('2d')\n        const video = document.querySelector('video')\n\n        if (that.stream) {\n          ctx.drawImage(video, 0, 0, 640, 480)\n          that.image = canvas.toDataURL('image/webp')\n          document.querySelector('img').src = that.image\n        }\n\n        this.toggleCamera()\n      },\n      vision: function () {\n        const key = 'AIzaSyBawpo7NovwPMYtBr_K-71BaF--_hluLSA'\n        const url = `https://vision.googleapis.com/v1/images:annotate?key=${key}`\n        let content = this.image.replace('data:image/webp;base64,', '')\n        let body =\n        {\n          requests: [\n            {\n              image: { content: content },\n              features: [{ type: \"DOCUMENT_TEXT_DETECTION\" }],\n              imageContext: {languageHints: ['en']}\n            }\n          ]\n        }\n        this.$http.post(url, body)\n        .then(response => {\n          const checkNewRow = function () {\n            if (itemObj.quantity !== 0 && itemObj.item !== '' && itemObj.price.match(/^\\$\\d{0,8}([\\.\\,]\\d{1,2})?$/)) {\n              itemObj.item = itemObj.item.slice(0, -1)\n              itemObj.price.replace(',', '.')\n              receipt.push(itemObj)\n              itemObj = {\n                quantity: 0,\n                item: '',\n                price: ''\n              }\n            }\n          }\n\n          let responseText = response.body.responses[0].textAnnotations[0].description.split('\\n')\n          let responseArr = response.body.responses[0].textAnnotations\n          responseArr.shift()\n          responseArr.sort(function(a, b) {\n            let x = a.boundingPoly.vertices[0].y - b.boundingPoly.vertices[0].y\n            return x == 0 ? a.boundingPoly.vertices[0].x - b.boundingPoly.vertices[0].x : x\n          })\n\n          let itemObj = {\n            quantity: 0,\n            item: '',\n            price: ''\n          }\n\n          let receipt = []\n\n          for (let i = 0, len = responseArr.length; i < len; i++) {\n            let elem = responseArr[i].description\n\n            if (elem === '$') {\n              checkNewRow()\n\n              itemObj.price += elem + responseArr[i+1].description + responseArr[i+2].description + responseArr[i+3].description\n              i += 3\n            } else if (!isNaN(parseInt(elem))) {\n              checkNewRow()\n\n              if (itemObj.quantity === 0) itemObj.quantity = parseInt(elem)\n            } else {\n              itemObj.item += elem + ' '\n            }\n\n            checkNewRow()\n            // console.log(i, itemObj) <-- TESTING ONLY\n          }\n          // console.log('responseArr: ', responseArr) <-- TESTING ONLY\n          // console.log('receipt: ', receipt) <-- TESTING ONLY\n        }, response => {\n          console.log('error', response)\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n@media screen and (min-width: 0px) and (max-width: 480px) {\n  #mobile { display: block; }  /* show it on small screens */\n  #desktop { display: none; } /* hide it on small screens */\n}\n\n@media screen and (min-width: 481px) {\n  #desktop { display: block; }  /* show it on large screens */\n  #mobile { display: none; } /* hide it on large screens */\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Camera.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"camera\"},[_vm._m(0,false,false),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"desktop\"}},[_vm._m(1,false,false),_vm._v(\" \"),_c('img',{attrs:{\"src\":\"\"}}),_vm._v(\" \"),_c('canvas',{staticStyle:{\"display\":\"none\"},attrs:{\"height\":\"480\",\"width\":\"640\"}}),_vm._v(\" \"),(_vm.isCapturing)?_c('button',{on:{\"click\":_vm.snapshot}},[_vm._v(\"Take Snapshot\")]):_c('button',{on:{\"click\":_vm.toggleCamera}},[_vm._v(\"Toggle Camera\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.vision}},[_vm._v(\"Vision\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mobile\"}},[_c('p',[_vm._v(\"Capture Image: \"),_c('input',{attrs:{\"type\":\"file\",\"accept\":\"image/*\",\"id\":\"capture\",\"capture\":\"camera\"}})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"video\"}},[_c('video',{attrs:{\"autoplay\":\"\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-22772d1d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Camera.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-22772d1d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Camera.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Camera.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-22772d1d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Camera.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-22772d1d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Camera.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\n\nimport Camera from '../components/Camera'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'camera',\n      component: Camera\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport vueResource from 'vue-resource'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\nVue.use(vueResource)\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}